<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <h1> Template literal Map </h1>
    <script src="/js/Api_call_functions.js"></script>
    <h1>Test_Try Array</h1>
</head>

<body>
    <script>
        const lg = console.log;


        const api_urlhist = "https://api.covid19map.nz/history.json";
        //constants for getting Opacity for map-
        var maxArray = [1, 2];
        lg(maxArray);
        let maxTot = 0; //  sets Maximum Total to 0, to iterate throuh with func to get Biggest number- can use for opacity



        async function getMaxRegionNum() {
            const response = await fetch(api_urlhist);
            const history = await response.json();

            lg(history);

            var xx = [];
            //loop to get array of all the current date values, thisarray to find maxvalue
            for (var i = 0; i < 20; i++) { // Hardcoded DHB numbers (19 in total so has to be <20)

                xx.push(history[Object.keys(history)[i]][20 - 1].total);
            }

            var mx = JSON.stringify(xx);
            lg(mx);
            var st = JSON.parse(mx);
            lg(st);
            maxArray = st.splice(0);
            lg(maxArray);

            return maxArray;
        };



        getMaxRegionNum();
        //var x = maxArray.splice(0);
        lg(maxArray);
    </script>


</body>

</html>